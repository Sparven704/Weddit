@using GroupProj1Weddit.Models;
@using System.Security.Claims;
@model GroupProj1Weddit.Models.ViewModels.CreatePostViewModel //Uppdaterad så den tar rätt model
@using Microsoft.AspNetCore.Identity;

@{
    ViewData["Title"] = "CreatePost";
}
@{
    int someVariable = (int)ViewBag.SomeVariable;
}
<h1>Create Post here</h1>

<a href="@Url.Action("Index", "Posts", new { id = ViewBag.someVariable})" class="btn btn-primary">Return to Posts</a>
 

<!-- Button to toggle the visibility of the "Create Post" form -->
<button id="toggleCreatePostForm" class="btn btn-primary">Create New Post</button>

<!-- Form for creating a new post (initially hidden) -->
<form id="createPostForm" asp-controller="Topics" asp-action="CreatePost" method="post" style="display:none;">
    @*<input type="hidden" asp-for="TopicId" value="@Model.TopicId" />*@
    @*<input type="hidden" asp-for="UserId" value="@User.FindFirstValue(ClaimTypes.NameIdentifier)" />*@


    <div class="form-group">
        <label for="Title">Title</label>
        <input type="text" id="Title" name="Title" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Description">Description</label>
        <textarea id="Description" name="Description" class="form-control"></textarea>
    </div>
    <!-- Add other form fields as needed for your Post model -->
    <button type="submit" class="btn btn-primary">Create</button>
</form>

<!-- JavaScript to toggle the visibility of the form -->
<script>
    document.getElementById('toggleCreatePostForm').addEventListener('click', function () {
        var form = document.getElementById('createPostForm');
        if (form.style.display === 'none' || form.style.display === '') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    });
</script>

