@model GroupProj1Weddit.Models.ViewModels.CommentViewModel;
@using System.Security.Claims;

@{
    ViewData["Title"] = "CreateComment";
}

<h1>Post a Comment here</h1>

<a href="@Url.Action("Index", "Comments", new { id = Model.Id})" class="btn btn-primary">Return to Post</a>


<!-- Button to toggle the visibility of the "Create Post" form -->
<button id="toggleCreateCommentForm" class="btn btn-primary">Post a Comment</button>

<!-- Form for creating a new comment (initially hidden) -->
<form id="createCommentForm" asp-controller="Comments" asp-action="CreateComment" method="post" style="display:none;">
    <input type="hidden" asp-for="PostId" value="@Model.PostId" />
    @*<input type="hidden" asp-for="UserId" value="@User.FindFirstValue(ClaimTypes.NameIdentifier)" />*@

    <div class="form-group">
        <label for="Content">Comment..</label>
        <textarea id="Content" name="Content" class="form-control" asp-for="Content"></textarea>
        <span asp-validation-for="Content" class="text-danger"></span>
    </div>
    <!-- Add other form fields as needed for your CommentViewModel -->
    <button type="submit" class="btn btn-primary">Post Comment</button>
</form>

<!-- JavaScript to toggle the visibility of the form -->
<script>
    document.getElementById('toggleCreateCommentForm').addEventListener('click', function () {
        var form = document.getElementById('createCommentForm');
        if (form.style.display === 'none' || form.style.display === '') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    });
</script>