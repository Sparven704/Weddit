@using GroupProj1Weddit.Models;
@using System.Security.Claims;
@model GroupProj1Weddit.Models.Comment;
@using Microsoft.AspNetCore.Identity;

@{
    ViewData["Title"] = "CreateComment";
}

<h1>Post a Comment here</h1>

<a href="@Url.Action("Comments", "Topics", new { id = Model.Id})" class="btn btn-primary">Return to Post</a>


<!-- Button to toggle the visibility of the "Create Post" form -->
<button id="toggleCreateCommentForm" class="btn btn-primary">Post a Comment</button>

<!-- Form for creating a new post (initially hidden) -->
<form id="createCommentForm" asp-controller="Topics" asp-action="CreateComment" method="post" style="display:none;">
    <input type="hidden" asp-for="PostId" value="@Model.PostId" />
    <input type="hidden" asp-for="UserId" value="@User.FindFirstValue(ClaimTypes.NameIdentifier)" />

    <div class="form-group">
        <label for="Content">Comment..</label>
        <textarea id="Content" name="Content" class="form-control"></textarea>
    </div>
    <!-- Add other form fields as needed for your Post model -->
    <button type="submit" class="btn btn-primary">Post Comment</button>
</form>

<!-- JavaScript to toggle the visibility of the form -->
<script>
    document.getElementById('toggleCreateCommentForm').addEventListener('click', function () {
        var form = document.getElementById('createCommentForm');
        if (form.style.display === 'none' || form.style.display === '') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    });
</script>